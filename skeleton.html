<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>2018-10284 손진아</title>
    <style></style>
</head>

<body>
    <div id="namespace">
        <p1> 2018-10284 손진아 </p1>
        <button>refresh</button>
    </div>
    <div id="chartspace">
        <label for="xaxis">Plot X Domain</label>
        <select name="xaxis" id="xaxis"></select>
        <label for="yaxis">Plot Y Domain</label>
        <select name="yaxis" id="yaxis"></select>
        <label for="bardomain">Bar X Domain</label>
        <select name="bardomain" id="bardomain"></select>
    </div>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script>
        function translate(x, y) {
            return 'translate(' + x + ', ' + y + ')'
        }

        // SVG, 차트 크기 설정
        let svgWidth = 550
        let svgHeight = 550
        let margin = { top: 20, right: 10, bottom: 30, left: 40 }
        let width = svgWidth - margin.left - margin.right
        let height = svgHeight - margin.top - margin.bottom

        // 데이터 경로 수정하지 말아주세요
        d3.json('data.json')
            .then((data) => {
                // 여기다 코드를 작성
                // processing data
                data.forEach(d => {
                    d.budget = parseFloat(d.budget);
                    d.us_gross = parseFloat(d.us_gross);
                    d.worldwide_gross = parseFloat(d.worldwide_gross);
                    d.rotten_rating = parseFloat(d.rotten_rating);
                    d.imdb_rating = parseFloat(d.imdb_rating);
                    d.imdb_votes = parseFloat(d.imdb_votes);
                });

                var scatterplotAxis = ["budget", "us_gross", "worldwide_gross", "rotten_rating", "imdb_rating", "imdb_votes"];
                var barchartAxis = ["title", "genre", "creative_type", "source", "release", "rating"];

                // add the options to dropdown menus
                d3.select("#xaxis")
                    .selectAll('option')
                    .data(scatterplotAxis)
                    .enter()
                    .append('option')
                    .text(function (d) { return d; })
                    .attr("value", function (d) { return d; });

                d3.select("#yaxis")
                    .selectAll('option')
                    .data(scatterplotAxis)
                    .enter()
                    .append('option')
                    .text(function (d) { return d; })
                    .attr("value", function (d) { return d; });

                d3.select("#bardomain")
                    .selectAll('option')
                    .data(barchartAxis)
                    .enter()
                    .append('option')
                    .text(function (d) { return d; })
                    .attr("value", function (d) { return d; });

                d3.select("#xaxis").on("change", function (d) {
                    var selectedOption = d3.select(this).property("value")
                    // run the func that updates the scatter plot with the selected option
                    console.log(selectedOption);
                });

                // add handlers on the drop down menus
                d3.select("#yaxis").on("change", function (d) {
                    var selectedOption = d3.select(this).property("value")
                    // run the func that updates the scatter plot with the selected option
                    console.log(selectedOption);
                });

                d3.select("#bardomain").on("change", function (d) {
                    var selectedOption = d3.select(this).property("value")
                    // run the function that updates the bar Chart
                    console.log(selectedOption);
                });

                // add handler for refresh button
                d3.select("button").on("click", function (d) {
                    console.log("clicked");
                });




            })
            .catch((error) => {
                throw error
            })
    </script>
</body>

</html>